<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Finanzas Personales</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- jQuery UI CSS (for datepicker) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.13.2/themes/base/jquery-ui.min.css">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- jQuery and jQuery UI (for datepicker) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <nav id="sidebar" class="col-md-3 col-lg-2 d-md-block bg-light sidebar">
                <div class="position-sticky pt-3">
                    <div class="sidebar-header mb-4">
                        <h3><i class="fas fa-wallet"></i> FinanzApp</h3>
                    </div>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="#" id="dashboard-link">
                                <i class="fas fa-home"></i> Inicio
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" id="transactions-link">
                                <i class="fas fa-exchange-alt"></i> Transacciones
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" id="income-link">
                                <i class="fas fa-arrow-down"></i> Ingresos
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" id="expenses-link">
                                <i class="fas fa-arrow-up"></i> Gastos
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" id="categories-link">
                                <i class="fas fa-tags"></i> Categorías
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" id="reports-link">
                                <i class="fas fa-chart-bar"></i> Reportes
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" id="settings-link">
                                <i class="fas fa-cog"></i> Configuración
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- Main Content -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <!-- Dashboard Section -->
                <section id="dashboard-section">
                    <!-- Header with User Info -->
                    <div class="user-header mt-3 mb-4">
                        <h4>Dashboard Finanzas</h4>
                        <div class="date-range">
                            <span id="current-date-range">Periodo actual</span>
                        </div>
                    </div>

                    <!-- Date Filter -->
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <div class="date-filter d-flex">
                                <input type="text" id="start-date" class="form-control datepicker" placeholder="Fecha inicial">
                                <span class="mx-2 mt-2">-</span>
                                <input type="text" id="end-date" class="form-control datepicker" placeholder="Fecha final">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <select id="period-selector" class="form-select">
                                <option value="current-month">Mes Actual</option>
                                <option value="last-month">Mes Anterior</option>
                                <option value="current-year">Año Actual</option>
                                <option value="custom">Personalizado</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <button id="add-transaction-btn" class="btn btn-primary w-100">
                                <i class="fas fa-plus"></i> Añadir
                            </button>
                        </div>
                    </div>

                    <!-- Summary Cards -->
                    <div class="row">
                        <div class="col-md-3 mb-4">
                            <div class="card metric-card income-card">
                                <div class="card-body">
                                    <div class="metric-icon">
                                        <i class="fas fa-arrow-down"></i>
                                    </div>
                                    <div class="metric-data">
                                        <h5 class="metric-title">Ingresos</h5>
                                        <h2 class="metric-value income-value">$0,00</h2>
                                        <div class="metric-trend">
                                            <span id="income-percent">0%</span>
                                            <div class="small-chart">
                                                <canvas id="income-chart"></canvas>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-4">
                            <div class="card metric-card expense-card">
                                <div class="card-body">
                                    <div class="metric-icon">
                                        <i class="fas fa-arrow-up"></i>
                                    </div>
                                    <div class="metric-data">
                                        <h5 class="metric-title">Gastos</h5>
                                        <h2 class="metric-value expenses-value">$0,00</h2>
                                        <div class="metric-trend">
                                            <span id="expense-percent">0%</span>
                                            <div class="small-chart">
                                                <canvas id="expense-chart"></canvas>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-4">
                            <div class="card metric-card balance-card">
                                <div class="card-body">
                                    <div class="metric-icon">
                                        <i class="fas fa-wallet"></i>
                                    </div>
                                    <div class="metric-data">
                                        <h5 class="metric-title">Balance</h5>
                                        <h2 class="metric-value balance-value">$0,00</h2>
                                        <div class="metric-trend">
                                            <div class="progress">
                                                <div class="progress-bar" role="progressbar" style="width: 0%"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-4">
                            <div class="card metric-card savings-card">
                                <div class="card-body">
                                    <div class="metric-icon">
                                        <i class="fas fa-piggy-bank"></i>
                                    </div>
                                    <div class="metric-data">
                                        <h5 class="metric-title">Ahorro</h5>
                                        <h2 class="metric-value savings-value">$0,00</h2>
                                        <div class="metric-trend">
                                            <span class="savings-percent">0%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Alcancía Row -->
                    <div class="row mb-4">
                        <div class="col-md-6 mb-4">
                            <div class="card piggy-bank-card">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <h5 class="card-title"><i class="fas fa-coins"></i> Alcancía</h5>
                                        <button id="show-piggy-bank" class="btn btn-sm btn-outline-primary">
                                            <i class="fas fa-eye"></i> Ver Balance
                                        </button>
                                    </div>
                                    <div class="piggy-bank-content">
                                        <div class="piggy-bank-hidden">
                                            <p>Tu alcancía está guardando tus ahorros de forma segura.</p>
                                            <div class="d-flex align-items-center">
                                                <div class="piggy-bank-icon me-3">
                                                    <i class="fas fa-lock"></i>
                                                </div>
                                                <div class="progress flex-grow-1" style="height: 15px;">
                                                    <div class="progress-bar bg-success" id="piggy-bank-progress" role="progressbar" style="width: 0%"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="piggy-bank-revealed" style="display: none;">
                                            <h3 class="piggy-bank-value">$0,00</h3>
                                            <p>Acumulado hasta ahora</p>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <button id="add-to-piggy-bank" class="btn btn-sm btn-success me-2">
                                            <i class="fas fa-plus"></i> Añadir a Alcancía
                                        </button>
                                        <button id="withdraw-from-piggy-bank" class="btn btn-sm btn-danger">
                                            <i class="fas fa-minus"></i> Retirar de Alcancía
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6 mb-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Distribución por Categorías</h5>
                                    <div class="chart-container">
                                        <canvas id="categories-chart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Performance Section -->
                    <div class="row mb-4">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Rendimiento</h5>
                                    <div class="performance-header d-md-flex justify-content-between mb-3">
                                        <div class="performance-total me-3 mb-2 mb-md-0">
                                            <span class="performance-label">Total Mes:</span>
                                            <span class="performance-value">$0,00</span>
                                        </div>
                                        <div class="performance-metrics d-flex flex-wrap">
                                            <div class="metric me-4 mb-2">
                                                <span class="metric-value">0</span>
                                                <span class="metric-label">Transacciones</span>
                                            </div>
                                            <div class="metric me-4 mb-2">
                                                <span class="metric-value" id="saving-rate">0%</span>
                                                <span class="metric-label">Ahorrado</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="chart-container">
                                        <canvas id="performance-chart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Transactions Table -->
                    <div class="row mb-4">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Últimas Transacciones</h5>
                                    <div class="table-responsive">
                                        <table class="table table-hover">
                                            <thead>
                                                <tr>
                                                    <th>Fecha</th>
                                                    <th>Concepto</th>
                                                    <th>Categoría</th>
                                                    <th>Monto</th>
                                                    <th>Acciones</th>
                                                </tr>
                                            </thead>
                                            <tbody id="transactions-table">
                                                <!-- Transactions will be populated here -->
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="text-center mt-3" id="no-transactions" style="display: none;">
                                        <p>No hay transacciones para mostrar</p>
                                        <button class="btn btn-sm btn-primary" id="add-first-transaction">
                                            Agregar primera transacción
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Transactions Section -->
                <section id="transactions-section" style="display: none;">
                    <div class="user-header mt-3 mb-4">
                        <h4>Transacciones</h4>
                        <button id="add-transaction-btn-2" class="btn btn-primary">
                            <i class="fas fa-plus"></i> Nueva Transacción
                        </button>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Fecha</th>
                                            <th>Tipo</th>
                                            <th>Categoría</th>
                                            <th>Descripción</th>
                                            <th>Monto</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody id="all-transactions-table">
                                        <!-- All transactions will be populated here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Income Section -->
                <section id="income-section" style="display: none;">
                    <!-- Content will be dynamically generated -->
                </section>
                
                <!-- Expenses Section -->
                <section id="expenses-section" style="display: none;">
                    <!-- Content will be dynamically generated -->
                </section>
                
                <!-- Categories Section -->
                <section id="categories-section" style="display: none;">
                    <div class="user-header mt-3 mb-4">
                        <h4>Gestión de Categorías</h4>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-body">
                                    <h5 class="card-title">Añadir Nueva Categoría</h5>
                                    <form id="category-form-main" class="mb-3">
                                        <div class="mb-3">
                                            <label for="category-type-main" class="form-label">Tipo de Categoría</label>
                                            <select class="form-select" id="category-type-main">
                                                <option value="income">Ingreso</option>
                                                <option value="expense">Gasto</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label for="category-name-main" class="form-label">Nombre de Categoría</label>
                                            <input type="text" class="form-control" id="category-name-main" required>
                                        </div>
                                        <button type="submit" class="btn btn-primary">Agregar Categoría</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-body">
                                    <h5 class="card-title">Categorías Existentes</h5>
                                    <div class="mb-3">
                                        <h6>Categorías de Ingreso</h6>
                                        <ul class="list-group mb-3" id="income-categories-list-main">
                                            <!-- Income categories will be populated here -->
                                        </ul>
                                    </div>
                                    <div>
                                        <h6>Categorías de Gasto</h6>
                                        <ul class="list-group" id="expense-categories-list-main">
                                            <!-- Expense categories will be populated here -->
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Reports Section -->
                <section id="reports-section" style="display: none;">
                    <div class="user-header mt-3 mb-4">
                        <h4>Reportes</h4>
                    </div>
                    
                    <!-- Report Generator -->
                    <div class="card mb-4">
                        <div class="card-body">
                            <h5 class="card-title">Generar Reporte</h5>
                            <div class="mb-3">
                                <label for="report-type" class="form-label">Tipo de Reporte</label>
                                <select class="form-select" id="report-type">
                                    <option value="monthly">Reporte Mensual</option>
                                    <option value="category">Reporte por Categoría</option>
                                    <option value="yearly">Reporte Anual</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="report-format" class="form-label">Formato</label>
                                <select class="form-select" id="report-format">
                                    <option value="preview">Vista Previa</option>
                                    <option value="print">Impresión</option>
                                </select>
                            </div>
                            <button id="generate-report-btn" class="btn btn-primary">Generar Reporte</button>
                        </div>
                    </div>
                    
                    <!-- Report Preview -->
                    <div class="card mb-4" id="report-preview-card">
                        <div class="card-body">
                            <h5 class="card-title">Vista Previa del Reporte</h5>
                            <div id="report-preview">
                                <div class="text-center py-5">
                                    <p>Seleccione un tipo de reporte y haga clic en "Generar Reporte" para ver la vista previa.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Settings Section -->
                <section id="settings-section" style="display: none;">
                    <div class="user-header mt-3 mb-4">
                        <h4>Configuración</h4>
                    </div>
                    
                    <!-- App Settings -->
                    <div class="card mb-4">
                        <div class="card-body">
                            <h5 class="card-title">Ajustes de la aplicación</h5>
                            
                            <div class="mb-4">
                                <label class="form-label d-block">Tema</label>
                                <div class="form-check form-check-inline form-switch">
                                    <input class="form-check-input" type="checkbox" id="dark-mode-toggle">
                                    <label class="form-check-label" for="dark-mode-toggle">Modo Oscuro</label>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <label class="form-label">Formato de moneda</label>
                                <select class="form-select" id="currency-format">
                                    <option value="$" selected>Peso ($)</option>
                                    <option value="€">Euro (€)</option>
                                    <option value="US$">Dólar (US$)</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Data Management -->
                    <div class="card mb-4">
                        <div class="card-body">
                            <h5 class="card-title">Administración de datos</h5>
                            
                            <div class="mb-3">
                                <button class="btn btn-warning" id="export-data-btn">
                                    <i class="fas fa-file-export"></i> Exportar datos
                                </button>
                            </div>
                            
                            <div class="mb-3">
                                <button class="btn btn-danger" id="reset-data-btn">
                                    <i class="fas fa-trash"></i> Reiniciar todos los datos
                                </button>
                                <small class="form-text text-muted d-block mt-2">
                                    Esta acción eliminará todas tus transacciones, categorías y configuraciones personalizadas.
                                </small>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <!-- Add Transaction Modal -->
    <div class="modal fade" id="transaction-modal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="transaction-modal-title">Agregar Transacción</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="transaction-form">
                        <input type="hidden" id="transaction-id">
                        <div class="mb-3">
                            <label for="transaction-date" class="form-label">Fecha</label>
                            <input type="text" class="form-control datepicker" id="transaction-date" required>
                        </div>
                        <div class="mb-3">
                            <label for="transaction-type" class="form-label">Tipo</label>
                            <select class="form-select" id="transaction-type" required>
                                <option value="income">Ingreso</option>
                                <option value="expense">Gasto</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="transaction-category" class="form-label">Categoría</label>
                            <select class="form-select" id="transaction-category" required>
                                <!-- Categories will be populated here -->
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="transaction-description" class="form-label">Descripción</label>
                            <input type="text" class="form-control" id="transaction-description" required>
                        </div>
                        <div class="mb-3">
                            <label for="transaction-amount" class="form-label">Monto</label>
                            <div class="input-group">
                                <span class="input-group-text">$</span>
                                <input type="number" class="form-control" id="transaction-amount" step="0.01" min="0" required>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" id="save-transaction">Guardar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Category Modal -->
    <div class="modal fade" id="category-modal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Administrar Categorías</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="category-form" class="mb-3">
                        <div class="mb-3">
                            <label for="category-type" class="form-label">Tipo de Categoría</label>
                            <select class="form-select" id="category-type">
                                <option value="income">Ingreso</option>
                                <option value="expense">Gasto</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="category-name" class="form-label">Nombre de Categoría</label>
                            <input type="text" class="form-control" id="category-name" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Agregar Categoría</button>
                    </form>
                    <hr>
                    <h6>Categorías de Ingreso</h6>
                    <ul class="list-group mb-3" id="income-categories-list">
                        <!-- Income categories will be populated here -->
                    </ul>
                    <h6>Categorías de Gasto</h6>
                    <ul class="list-group" id="expense-categories-list">
                        <!-- Expense categories will be populated here -->
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Piggy Bank Modal -->
    <div class="modal fade" id="piggy-bank-modal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="piggy-bank-modal-title">Gestionar Alcancía</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="piggy-bank-form">
                        <div class="mb-3">
                            <label for="piggy-bank-amount" class="form-label">Monto</label>
                            <div class="input-group">
                                <span class="input-group-text">$</span>
                                <input type="number" class="form-control" id="piggy-bank-amount" step="0.01" min="0" required>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="piggy-bank-description" class="form-label">Descripción (opcional)</label>
                            <input type="text" class="form-control" id="piggy-bank-description">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" id="save-piggy-bank">Guardar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JavaScript -->
    <script src="script.js"></script>
</body>
</html>
